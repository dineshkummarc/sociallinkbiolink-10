import{T as D,r as M,m as P,o as T,a as U,i as c,c as d,b as o,d as m,t as p,p as j,w as q,u as n,g as h,h as x,F as O,e as F,v as B,q as I,O as N}from"./app-ea7ca92b.js";import{a as C}from"./SpinnerBtn-5f942d18.js";const L={class:"flex items-stretch justify-end gap-x-2"},z={class:"dropdown","data-placement":"bottom-end"},E={class:"dropdown-toggle"},K={type:"button",class:"font-medium bg-white shadow-sm btn dark:bg-slate-800 hover:dark:bg-slate-700 border border-slate-700"},Q={class:"dropdown-content w-72 !overflow-visible"},R={class:"p-4 space-y-4 dropdown-list"},$={key:0,class:"dropdown-list-item"},G={class:"mb-1 capitalize"},H=["value"],J={key:1,class:"dropdown-list-item"},W={class:"mb-1"},X={class:"dropdown-list-item"},Y={class:"mb-1"},Z=["value","selected"],ee={class:"dropdown-list-item"},te=o("i",{class:"bx bx-x"},null,-1),se=[te],ne={__name:"FilterForm",props:{action:{type:String,required:!1,default:""},options:{type:[Array,Object],required:!1,default:[{value:"id",label:"id",selected:!0}]}},setup(y){var f,_,w,g,k,S;const r=y,b=()=>{const t={},l=new URLSearchParams(window.location.search);for(const[a,e]of l)t.hasOwnProperty(a)?Array.isArray(t[a])?t[a].push(e):t[a]=[t[a],e]:t[a]=e;return t},s=D({search:((f=b())==null?void 0:f.search)??"",type:((_=b())==null?void 0:_.type)??((g=(w=r.options)==null?void 0:w.find(t=>t.selected))==null?void 0:g.value)??((S=(k=r.options)==null?void 0:k[0])==null?void 0:S.value)??""}),V=()=>{s.get(r.action)},A=()=>{N.get(location.pathname)},i=M([]);return P(()=>s.type,()=>{var t,l,a,e;if(s.search="",r.options&&s.type){let u=((t=r.options)==null?void 0:t.find(v=>v.value==s.type))??[];i.value=u.options??[],s.search=((a=(l=u.options)==null?void 0:l.find(v=>v.selected==!0))==null?void 0:a.value)??((e=i.value[0])==null?void 0:e.value)??""}else i.value=[]}),T(()=>{var a,e;let t=((a=r.options)==null?void 0:a.find(u=>u.value==s.type))??{};t.hasOwnProperty("options")&&Array.isArray(t.options)&&(i.value=t.options,s.search||(s.search=((e=i.value[0])==null?void 0:e.value)??""))}),(t,l)=>{const a=U("Icon");return c(),d("div",L,[o("div",z,[o("div",E,[o("button",K,[m(a,{icon:"fe:filter"}),o("span",null,p(t.trans("Filter")),1),m(a,{icon:"bx:chevron-down"})])]),o("div",Q,[j(p(r.action??"nai")+" ",1),o("form",{onSubmit:q(V,["prevent"])},[o("ul",R,[i.value.length?(c(),d("li",$,[o("label",G,p(n(s).type),1),h(o("select",{class:"select","onUpdate:modelValue":l[0]||(l[0]=e=>n(s).search=e)},[(c(!0),d(O,null,F(i.value,e=>(c(),d("option",{key:e.value,value:e.value},p(e.label),9,H))),128))],512),[[x,n(s).search]])])):(c(),d("li",J,[o("label",W,p(t.trans("Search Keyword")),1),h(o("input",{type:"text","onUpdate:modelValue":l[1]||(l[1]=e=>n(s).search=e),class:"input",placeholder:"enter search keyword"},null,512),[[B,n(s).search]])])),o("li",X,[o("label",Y,p(t.trans("Search Type")),1),h(o("select",{class:"select","onUpdate:modelValue":l[2]||(l[2]=e=>n(s).type=e)},[(c(!0),d(O,null,F(y.options,e=>(c(),d("option",{key:e.value,value:e.value,selected:e.selected},p(e.label),9,Z))),128))],512),[[x,n(s).type]])]),o("li",ee,[m(C,{type:"submit",processing:n(s).processing,"btn-text":t.trans("Search"),class:"w-full btn btn-primary"},null,8,["processing","btn-text"])])])],32)])]),h(o("button",{onClick:A,class:"flex items-center bg-gray-300 border dark:bg-gray-700 btn hover:dark:bg-slate-800 hover:dark:border-slate-700 dark:border-gray-600",title:"clear filter"},se,512),[[I,b().search]])])}}};export{ne as _};
