import{r as g,T as B,A as T,a as U,c as p,d as o,b as t,l as j,C as P,i as b,t as d,g as y,v as C,u,n as k,k as _,F as I,e as N,w as F}from"./app-ea7ca92b.js";import{_ as L}from"./PageHeader-5a9828b9.js";import{_ as A}from"./UserLayout-1d3d4f88.js";import D from"./CategorySelector-8301c3fa.js";import M from"./PlatformSelector-f5766e86.js";import q from"./TemplateSelector-ea8aa154.js";import z from"./StepIndicator-71509958.js";import{_ as E}from"./SpinnerBtn-b218ef39.js";import{_ as f}from"./InputFieldError-88a28532.js";const G={class:"container p-4 sm:p-6"},O={class:"relative mx-auto max-w-4xl space-y-6"},H={key:"username",class:"absolute w-full space-y-4"},J={class:"card card-body"},K={class:""},Q={class:"label label-required mb-1"},R={class:"mt-4"},W={class:"label mb-1"},X={class:"flex justify-end"},Y=["disabled"],Z={key:"category",class:"absolute w-full space-y-4"},ee={class:"flex justify-between"},se=["disabled"],te={key:"platforms",class:"absolute w-full space-y-4"},le={class:"flex justify-between"},ae=["disabled"],ne={key:"links",class:"absolute w-full space-y-4"},oe={class:"card space-y-4 p-6"},re={class:"rounded-md border border-gray-700 p-1.5"},ie=["id","onUpdate:modelValue","placeholder"],ue={class:"flex justify-between"},ce=["disabled"],de={key:"links",class:"absolute w-full space-y-4"},me={class:"flex justify-between"},he=Object.assign({layout:A},{__name:"Index",props:["categories","profileTemplates"],setup(h){const n=g(1),m=g(null),r=g([]),l=B({username:"",bio:"",category_id:null,links:[],current_step:1,template:""}),x=[{number:1,title:"Choose a username"},{number:2,title:"Select Profession"},{number:3,title:"Choose Platforms"},{number:4,title:"Add Links"},{number:5,title:"Select Template"}],w=e=>{m.value=m.value===e?null:e,r.value=r.value.map(s=>({...s,url:""}))},S=e=>{const s=r.value.findIndex(i=>i.id===e.id);s===-1?r.value.push({...e,url:""}):r.value.splice(s,1)},v=()=>{var s;l.current_step=n.value;const e=(i,a)=>{l.transform(()=>({...i,current_step:n.value})).post(route("user.sociallink.setup.store"),{preserveState:!0,onSuccess:a})};switch(n.value){case 1:e({username:l.username,bio:l.bio},()=>n.value++);break;case 2:e({category_id:(s=m.value)==null?void 0:s.id},()=>n.value++);break;case 3:e({platforms:r.value.map(i=>i.id)},()=>n.value++);break;case 4:l.links=r.value.filter(i=>{var a;return(a=i.url)==null?void 0:a.trim()}),e({links:l.links},()=>n.value++);break;case 5:l.transform(()=>{var i;return{...l,current_step:n.value,category_id:(i=m.value)==null?void 0:i.id}}).post(route("user.sociallink.setup.store"),{onSuccess:()=>{n.value=1,m.value=null,r.value=[]}});break;default:console.warn("Invalid step.");break}},$={1:()=>{var e;return((e=l.username)==null?void 0:e.trim().length)>0},2:()=>m.value!==null,3:()=>r.value.length>0,4:()=>r.value.some(e=>{var s;return(s=e.url)==null?void 0:s.trim()}),5:()=>{var e;return((e=l.template)==null?void 0:e.trim().length)>0}},c=T(()=>$[n.value]());return(e,s)=>{const i=U("Icon");return b(),p("main",G,[o(L,{title:"Social Link Setup"}),o(z,{steps:x,currentStep:n.value},null,8,["currentStep"]),t("div",O,[o(P,{name:"fade",mode:"out-in",tag:"div"},{default:j(()=>[n.value===1?(b(),p("div",H,[t("div",J,[t("div",K,[t("label",Q,d(e.trans("Username")),1),y(t("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=a=>u(l).username=a),class:"input",placeholder:"Username"},null,512),[[C,u(l).username]]),o(f,{message:u(l).errors.username,class:"text-sm"},null,8,["message"])]),t("div",R,[t("label",W,d(e.trans("Bio")),1),y(t("textarea",{"onUpdate:modelValue":s[1]||(s[1]=a=>u(l).bio=a),class:"textarea",placeholder:"Bio"},null,512),[[C,u(l).bio]]),o(f,{message:u(l).errors.bio,class:"text-sm"},null,8,["message"])])]),t("div",X,[t("button",{onClick:v,disabled:!c.value,class:k(["btn w-full",c.value?"btn-primary":"btn-dark"])},d(e.trans("Continue")),11,Y)])])):_("",!0),n.value===2?(b(),p("div",Z,[o(D,{selectedCategory:m.value,onSelect:w,categories:h.categories},null,8,["selectedCategory","categories"]),o(f,{message:u(l).errors.category_id,class:"text-sm"},null,8,["message"]),t("div",ee,[t("button",{onClick:s[2]||(s[2]=a=>n.value--),class:"btn btn-outline-danger"},d(e.trans("Back")),1),t("button",{onClick:v,disabled:!c.value,class:k(["btn",c.value?"btn-primary":"btn-dark"])},d(e.trans("Continue")),11,se)])])):_("",!0),n.value===3?(b(),p("div",te,[o(M,{selectedCategory:m.value,selectedPlatforms:r.value,onSelect:S},null,8,["selectedCategory","selectedPlatforms"]),o(f,{message:u(l).errors.platforms,class:"text-sm"},null,8,["message"]),t("div",le,[t("button",{onClick:s[3]||(s[3]=a=>n.value--),class:"btn btn-outline-danger"},"Back"),t("button",{onClick:v,disabled:!c.value,class:k(["btn",c.value?"btn-primary":"btn-dark"])},d(e.trans("Continue")),11,ae)])])):_("",!0),n.value===4?(b(),p("div",ne,[t("div",oe,[(b(!0),p(I,null,N(r.value,a=>(b(),p("div",{key:a.id,class:"flex items-center gap-2"},[t("div",re,[o(i,{icon:a.icon,class:"h-6 w-6"},null,8,["icon"])]),y(t("input",{id:a.id,"onUpdate:modelValue":V=>a.url=V,placeholder:`${a.name} url`,class:"input flex-1",type:"url"},null,8,ie),[[C,a.url]]),o(f,{message:u(l).errors[`links.${a.id}.url`],class:"text-sm"},null,8,["message"])]))),128))]),t("div",ue,[t("button",{onClick:s[4]||(s[4]=a=>n.value--),class:"btn btn-outline-danger"},d(e.trans("Back")),1),t("button",{onClick:v,disabled:!c.value,class:k(["btn",c.value?"btn-primary":"btn-dark"])},d(e.trans("Continue")),11,ce)])])):_("",!0),n.value===5?(b(),p("div",de,[o(q,{modelValue:u(l).template,"onUpdate:modelValue":s[5]||(s[5]=a=>u(l).template=a),profileTemplates:h.profileTemplates},null,8,["modelValue","profileTemplates"]),t("div",me,[t("button",{onClick:s[6]||(s[6]=a=>n.value--),class:"btn btn-outline-danger"},d(e.trans("Back")),1),o(E,{onClick:F(v,["prevent"]),class:"btn flex items-center",classes:c.value?"btn-primary":"btn-dark",processing:u(l).processing,disabled:!c.value,"btn-text":e.trans("Submit")},null,8,["classes","processing","disabled","btn-text"])])])):_("",!0)]),_:1})])])}}});export{he as default};
