import{r as L,o as O,M as Y,a as q,i as r,c as h,b as t,F as B,p as w,t as s,f as j,n as A,y as H,k as b,d as l,l as m,e as I,$ as J,N as X,s as Z,Y as tt,A as U,G as et,u as o,j as c,g as K,v as st}from"./app-ea7ca92b.js";import{u as ot,_ as nt}from"./Modal-2b1d09f4.js";const at={class:"relative flex max-w-min flex-col"},W={__name:"FloatingDropdown",props:{btnType:{type:String,default:"text"},btnText:{type:String,default:"Toggle"},iconName:{type:String,default:"bx:dots-horizontal-rounded"},btnClass:{type:String,default:"btn"},iconClass:{type:String,default:"text-2xl"},position:{type:String,default:"right"},activeClass:{type:String,default:"text-primary-500"}},setup(a,{expose:n}){const p=a,y=L(!1),k=L(null),M=L(null),x=L(p.position),V={right:"right-1",left:"left-1"},C=()=>{y.value=!y.value,X(()=>{if(M.value){const f=k.value.getBoundingClientRect(),g=M.value.offsetWidth,S=f.left,T=window.innerWidth-f.right;S<g&&T<g?x.value=p.position:p.position==="right"&&S<g?x.value="left":p.position==="left"&&T<g?x.value="right":x.value=p.position}})};n({toggleDropdown:C});const $=f=>{y.value&&!M.value.contains(f.target)&&!k.value.contains(f.target)&&f.target!==k.value&&(y.value=!1)};return O(()=>{document.addEventListener("click",$)}),Y(()=>{document.removeEventListener("click",$)}),(f,g)=>{const S=q("Icon");return r(),h("div",at,[t("button",{ref_key:"dropdownBtn",ref:k,type:"button",onClick:C,class:A(["max-w-max",[y.value?a.activeClass:"",a.btnClass]])},[a.btnText&&a.btnType==="text"?(r(),h(B,{key:0},[w(s(a.btnText),1)],64)):a.btnText&&a.btnType==="icon"?(r(),j(S,{key:1,class:A(a.iconClass),icon:a.iconName},null,8,["class","icon"])):a.btnType==="slot"?H(f.$slots,"btnContent",{key:2},()=>[w(s(a.btnText),1)]):b("",!0)],2),l(J,{name:"slide-bottom"},{default:m(()=>[y.value?(r(),h("div",{key:0,ref_key:"dropdownContent",ref:M,class:A([V[x.value]||"right-0","absolute right-0 top-full z-[500] mt-1 min-w-max overflow-hidden whitespace-nowrap rounded-md border bg-slate-50 shadow-lg dark:border-secondary-700 dark:bg-dark-800"])},[H(f.$slots,"default",{},()=>[(r(),h(B,null,I(10,T=>t("p",{key:T},"Dropdown Contents")),64))])],2)):b("",!0)]),_:3})])}}};class it{constructor(n){if(this.dropdown=null,this.dropdownBtns=null,typeof n=="string"&&(this.dropdown=document.querySelector(n)),n instanceof HTMLElement&&(this.dropdown=n),!n)throw new Error("No target element found");this.dropdown&&(this.dropdownBtns=this.dropdown.querySelectorAll("[data-theme-mode]")),this.dropdownBtns&&this.dropdownBtns.length&&(this.updateActiveClass(),[...this.dropdownBtns].forEach(p=>{p.addEventListener("click",()=>this.toggle(p))}))}toggle(n){const p=n.dataset.themeMode;p==="light"&&localStorage.setItem("theme","light"),p==="dark"&&localStorage.setItem("theme","dark"),p==="system"&&localStorage.removeItem("theme"),window.location.reload()}updateActiveClass(){[...this.dropdownBtns].forEach(n=>{n.classList.contains("active")&&n.classList.remove("active"),!localStorage.theme&&n.dataset.themeMode==="system"&&n.classList.add("active"),localStorage.theme===n.dataset.themeMode&&n.classList.add("active")})}}const lt={init(){const a=document.querySelector("#theme-switcher-dropdown");a&&new it(a)}},rt={class:"header"},dt={class:"container-fluid flex items-center justify-between"},ct={class:"flex items-center space-x-6"},ut=t("span",{class:"flex space-x-4"},[t("svg",{stroke:"currentColor",fill:"none","stroke-width":"0",viewBox:"0 0 24 24",height:"22",width:"22",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h8m-8 6h16"})])],-1),ht=[ut],pt={class:"sm:hidden"},ft={class:"ml-2 text-sm text-slate-400"},mt={class:"flex items-center"},gt={class:"dropdown-list"},vt={class:"dropdown","data-strategy":"absolute",id:"theme-switcher-dropdown"},wt={class:"dropdown-toggle px-3 text-slate-500 hover:text-slate-700 focus:text-primary-500 dark:text-slate-400 dark:hover:text-slate-300 dark:focus:text-primary-500",type:"button"},yt={class:"dropdown-content mt-3 w-36"},xt={class:"dropdown-list"},_t={class:"dropdown-list-item"},bt={type:"button",class:"dropdown-btn","data-theme-mode":"light"},kt={class:"dropdown-list-item"},Ct={type:"button",class:"dropdown-btn","data-theme-mode":"dark"},St={class:"dropdown-list-item"},Lt={type:"button",class:"dropdown-btn","data-theme-mode":"system"},Mt={class:"relative flex items-center justify-center rounded-full text-slate-500 transition-colors duration-150 hover:text-slate-700 focus:text-primary-500 dark:text-slate-400 dark:hover:text-slate-300 dark:focus:text-primary-500"},Tt={key:0,class:"absolute -right-1 -top-1.5 flex h-4 w-4 items-center justify-center rounded-full bg-danger-500 text-[11px] text-slate-200"},Nt={class:"w-[17.5rem] divide-y dark:divide-slate-700 sm:w-80"},Bt={class:"flex items-center justify-between px-4 py-4"},$t={class:"text-slate-800 dark:text-slate-300"},Et={class:"h-80 w-full","data-simplebar":""},Dt=["onClick"],jt=t("div",{class:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-full bg-blue-100 text-blue-500"},[t("i",{class:"bx bx-user-voice",width:"20",height:"20"})],-1),At=["href"],It={class:"text-sm font-normal"},Vt=["title"],Wt={class:"mt-1 flex items-center gap-1 text-xs text-slate-400"},qt={key:1,class:"mt-5 text-center"},zt={key:0,class:"px-4 py-2"},Pt={class:"group relative flex items-center gap-x-1.5",type:"button"},Rt={class:"avatar avatar-circle avatar-indicator avatar-indicator-online"},Ft=["alt"],Ht={class:"w-56 divide-y dark:divide-slate-600"},Ut={class:"px-4 py-3"},Kt={class:"text-sm"},Ot={class:"truncate text-sm font-medium"},Gt={class:"dropdown-btn"},Qt={key:0,class:"dropdown-btn"},Yt={href:"/admin/clear-cache"},Jt={class:"py-1"},Xt={method:"POST",action:"#"},Zt={class:"text-center"},te={class:"group my-5 flex items-center rounded-lg bg-slate-50 p-1 dark:bg-slate-600"},ee={key:0,class:"styled-scrollbar max-h-[560px] space-y-2 overflow-y-auto"},se={class:"flex items-center gap-2"},oe={key:1,class:"text-center text-slate-500 dark:text-slate-400"},ie={__name:"Header",props:{panel:{type:String,default:"admin"}},setup(a){const{authUser:n,logout:p,uiAvatar:y}=Z(),k=tt(),M=k.props.sidebar_menu,x=a,V=(e="#")=>{try{return route(e)}catch{return e}},C=ot(),$=L(),f=()=>{C.open("searchModal"),setTimeout(()=>{var e;(e=$.value)==null||e.focus()},50)},g=L(k.props.userNotifications??[]),S=U(()=>{var e;return((e=g.value)==null?void 0:e.filter(d=>d.seen==0).length)??0}),T=e=>{axios.post(route(x.panel+".notifications.read",e.id)).then(d=>{var i,v;(i=d.data)!=null&&i.redirect_to&&(window.location.href=(v=d.data)==null?void 0:v.redirect_to)})},G=()=>{window.location.href=route(x.panel+".notifications.clear")},E=L(""),z=U(()=>{const e=v=>v.links.flatMap(_=>_.type==="dropdown"&&Array.isArray(_.children)?_.children:_),d=M.flatMap(e);E.value||d.slice(0,100);const i=E.value.toLowerCase().trim().split(/\s+/);return d.filter(v=>{const _=v.text.toLowerCase();return i.every(D=>_.includes(D))})});O(()=>{lt.init(),document.addEventListener("keydown",e=>{e.ctrlKey&&e.key=="k"&&(e.preventDefault(),f())}),document.addEventListener("keydown",e=>{e.key=="Escape"&&(e.preventDefault(),C.close())})});const Q=()=>{const e=document.querySelector(".sidebar"),d=document.querySelector(".wrapper");window.innerWidth<1024?(e.classList.toggle("expanded"),document.querySelector(".sidebar-overlay").classList.toggle("active")):(e.classList.toggle("collapsed"),d.classList.toggle("expanded"))};return(e,d)=>{var D,P,R;const i=q("Icon"),v=q("Link"),_=et("lazy");return r(),h(B,null,[t("header",rt,[t("div",dt,[t("div",ct,[t("button",{onClick:Q},ht),t("div",pt,[t("button",{type:"button",onClick:f,class:"flex items-center justify-center rounded-full text-slate-500 transition-colors duration-150 hover:text-primary-500 focus:text-primary-500 dark:text-slate-400 dark:hover:text-slate-300"},[l(i,{icon:"fe:search"})])]),t("button",{type:"button",onClick:f,class:"group hidden h-10 w-72 items-center overflow-hidden rounded-primary bg-slate-100 px-3 shadow-sm dark:border-transparent dark:bg-slate-700 sm:flex"},[l(i,{icon:"fe:search"}),t("span",ft,[t("code",null,s(o(c)("Ctrl + K")),1),w(" "+s(o(c)("search"))+", ",1),t("code",null,s(o(c)("Esc")),1),w(" "+s(o(c)("to close")),1)])])]),t("div",mt,[Object.keys(((D=e.$page.props)==null?void 0:D.languages)??{}).length>1?(r(),j(W,{key:0,"btn-text":(R=e.$page.props)==null?void 0:R.languages[(P=e.$page.props)==null?void 0:P.locale]},{default:m(()=>[t("ul",gt,[(r(!0),h(B,null,I(e.$page.props.languages,(u,N)=>(r(),h("li",{key:N,class:"dropdown-list-item"},[l(v,{as:"button",href:e.route("set-locale",N),method:"patch",class:"dropdown-btn"},{default:m(()=>[w(s(u),1)]),_:2},1032,["href"])]))),128))])]),_:1},8,["btn-text"])):b("",!0),t("div",vt,[t("button",wt,[l(i,{class:"hidden dark:block",width:"24",height:"24",icon:"fe:moon"},{default:m(()=>[w(s(o(c)("Dark")),1)]),_:1}),l(i,{class:"block dark:hidden",width:"24",height:"24",icon:"fe:sunny-o"},{default:m(()=>[w(s(o(c)("Light")),1)]),_:1})]),t("div",yt,[t("ul",xt,[t("li",_t,[t("button",bt,[l(i,{width:"16",height:"16",icon:"fe:sunny-o"}),t("span",null,s(o(c)("Light")),1)])]),t("li",kt,[t("button",Ct,[l(i,{width:"16",height:"16",icon:"fe:moon"}),t("span",null,s(o(c)("Dark")),1)])]),t("li",St,[t("button",Lt,[l(i,{width:"16",height:"16",icon:"tdesign:system-setting"}),t("span",null,s(o(c)("System")),1)])])])])]),l(W,{"btn-type":"slot"},{btnContent:m(()=>[t("button",Mt,[l(i,{width:"24",height:"24",icon:"fe:bell"}),S.value?(r(),h("span",Tt,s(S.value),1)):b("",!0)])]),default:m(()=>[t("div",Nt,[t("div",Bt,[t("h6",$t,s(o(c)("Notifications")),1),g.value.length?(r(),h("button",{key:0,onClick:d[0]||(d[0]=u=>G()),class:"text-xs font-medium text-slate-600 hover:text-primary-500 dark:text-slate-300"},s(o(c)("Clear All")),1)):b("",!0)]),t("div",Et,[t("ul",null,[g.value.length?(r(!0),h(B,{key:0},I(g.value,(u,N)=>(r(),h("li",{key:N,onClick:F=>T(u),class:A(["flex cursor-pointer gap-4 border-b-2 border-white px-4 py-3 transition-colors duration-150 hover:bg-slate-200/70 dark:border-secondary-600 dark:hover:bg-slate-700",{"bg-slate-100/70 dark:bg-slate-700":!u.seen}])},[jt,t("a",{href:e.sanitizeHtml(u.url),onClick:d[1]||(d[1]=F=>F.preventDefault())},[t("h6",It,s(u.title),1),t("p",{class:"text-xs text-slate-400",title:u.comment},s(u.comment_short),9,Vt),t("p",Wt,[l(i,{icon:"fe:clock",width:"1em",height:"1em"}),t("span",null,s(u.created_at_human_date),1)])],8,At)],10,Dt))),128)):(r(),h("li",qt,s(o(c)("No notifications")),1))])]),g.value.length>5?(r(),h("div",zt,[a.panel==="admin"?(r(),j(v,{key:0,href:e.route("admin.notification.index"),class:"btn btn-primary-plain btn-sm w-full"},{default:m(()=>[t("span",null,s(o(c)("View More")),1),l(i,{icon:"arrow-right",width:"1rem",height:"1rem"})]),_:1},8,["href"])):b("",!0)])):b("",!0)])]),_:1}),l(W,{"btn-type":"slot"},{btnContent:m(()=>[t("button",Pt,[t("div",Rt,[K(t("img",{class:"avatar-img group-focus-within:ring group-focus-within:ring-primary-500",alt:o(n).name},null,8,Ft),[[_,o(y)(o(n).name,o(n).avatar)]])])])]),default:m(()=>[t("div",Ht,[t("div",Ut,[t("p",Kt,[w(s(o(c)("Welcome"))+" ",1),t("strong",null,s(o(n).name),1),w("! ")]),t("p",Ot,"("+s(o(n).email)+")",1)]),t("div",Gt,[l(i,{icon:"fe:user"}),l(v,{href:`/${a.panel}/profile`},{default:m(()=>[w(s(o(c)("Edit Profile")),1)]),_:1},8,["href"])]),a.panel==="admin"?(r(),h("div",Qt,[l(i,{icon:"fe:lock"}),t("a",Yt,s(o(c)("Clear Cache")),1)])):b("",!0),t("div",Jt,[t("form",Xt,[t("button",{type:"button",onClick:d[2]||(d[2]=u=>o(p)()),class:"dropdown-btn"},[l(i,{icon:"fe:logout"}),t("span",null,s(o(c)("Logout")),1)])])])])]),_:1})])])]),l(nt,{state:o(C).states.searchModal,closeBtn:!1},{default:m(()=>[t("h4",Zt,s(o(c)("Menu Search")),1),t("div",te,[K(t("input",{ref_key:"searchInput",ref:$,type:"text","onUpdate:modelValue":d[3]||(d[3]=u=>E.value=u),class:"input w-full",placeholder:"Search"},null,512),[[st,E.value]])]),z.value.length>0?(r(),h("div",ee,[(r(!0),h(B,null,I(z.value,(u,N)=>(r(),j(v,{key:N,onClick:o(C).close,href:V(u.href)??"#",class:"flex items-center justify-between gap-2 rounded-primary bg-slate-50 px-4 py-3 text-sm shadow-sm hover:bg-slate-100 dark:bg-slate-700 dark:hover:bg-slate-600"},{default:m(()=>[t("div",se,[l(i,{icon:u.icon??"bx:subdirectory-right"},null,8,["icon"]),t("span",null,s(u.text),1)]),l(i,{icon:"bx:chevron-right"})]),_:2},1032,["onClick","href"]))),128))])):(r(),h("div",oe,s(o(c)("No result found")),1))]),_:1},8,["state"])],64)}}};export{ie as default};
